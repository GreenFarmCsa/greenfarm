(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-022f80ea"],{"0fac":function(t,i,e){"use strict";e.d(i,"a",(function(){return a})),e.d(i,"b",(function(){return n})),e.d(i,"f",(function(){return o})),e.d(i,"d",(function(){return r})),e.d(i,"e",(function(){return c})),e.d(i,"c",(function(){return l})),e.d(i,"g",(function(){return u}));var s=e("b775");function a(t){return Object(s["a"])({url:"/topic/add",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/topic/addComment",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/topic/queryComment",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/topic/queryByCommunityId",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/topic/queryByUserName",method:"get",params:t})}function l(t){return Object(s["a"])({url:"/topic/queryByTopicId",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/topic/like",method:"put",params:t})}},"3dfa":function(t,i,e){},"58aa":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"postinfobody"},[e("div",{staticClass:"postinfo-img"},[e("img",{attrs:{src:t.getImg(t.com.communityImageUrl),alt:""}})]),e("div",{staticClass:"list-body"},t._l(t.dataList,(function(i,s){return e("div",{key:s,staticClass:"list"},[e("div",{staticClass:"list-left"},[e("img",{attrs:{src:t.getImg(i.topicImageUrl),alt:""}})]),e("div",{staticClass:"list-right"},[e("div",{staticClass:"list-right-title",domProps:{innerHTML:t._s(i.topicContent)},on:{click:function(e){return t.$router.push("/community/post-detail/"+i.topicId)}}}),e("div",{staticClass:"list-right-bottom"},[e("div",{staticClass:"list-right-bottom-left"},[e("div",{staticClass:"list-right-bottom-left-img"},[e("svg-icon",{staticStyle:{"font-size":"0.24rem"},attrs:{iconClass:"time"}})],1),e("div",{staticClass:"list-right-bottom-left-time"},[t._v(t._s(i.time))])]),e("div",{staticClass:"list-right-bottom-right"},[e("svg-icon",{staticStyle:{"font-size":"0.38rem"},attrs:{iconClass:0==i.hasLiked?"heart-disabled":"heart-enabled"},on:{click:function(e){return t.like(s,i)}}}),e("div",{staticClass:"like-num",on:{click:function(e){return t.like(s,i)}}},[t._v(t._s(i.likeSum))])],1)])])])})),0),e("div",{staticClass:"div"})])},a=[],n=e("0fac"),o=e("ed08"),r={name:"HomePage",data(){return{dataList:[],com:{}}},created(){this.getData()},methods:{toInfo(t){this.$router.push({path:"/postinfo"})},getImg(t){return"http://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8081/file/download?url="+t},getData(){this.com=JSON.parse(this.$route.query.id),Object(n["d"])({id:this.com.communityId,username:this.$store.state.user.username}).then(t=>{let i=[];for(let e=0;e<t.data.length;e++){let s=t.data[e];s.topicContent&&(s.topicContent=s.topicContent.replace(/\n/g,"<br/>")),i[e]=s;let a=Object(o["b"])(t.data[e].createTime);i[e].topicImageUrl=t.data[e].topicImageUrl,this.$set(i[e],"time",a)}this.dataList=i}).catch(t=>{console.log(t)})},getTime(t){return t.split(".")[0].split("T")[0]+" "+t.split(".")[0].split("T")[1]?t.split(".")[0].split("T")[0]+" "+t.split(".")[0].split("T")[1]:t},like(t,i){let e={topicId:i.topicId,username:this.$store.state.user.username,isLike:!i.hasLiked};Object(n["g"])(e).then(t=>{i.hasLiked=!i.hasLiked,i.hasLiked?i.likeSum=i.likeSum+1:i.likeSum=i.likeSum-1}).catch(t=>{console.log(t)})}}},c=r,l=(e("adcd"),e("2877")),u=Object(l["a"])(c,s,a,!1,null,"5fac3da5",null);i["default"]=u.exports},adcd:function(t,i,e){"use strict";e("3dfa")}}]);