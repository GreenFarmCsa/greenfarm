(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["farm.detail"],{"06cd":function(t,e,a){},"0978":function(t,e,a){var s={"./seed-1.png":"1a38","./seed-2.png":"b75c","./seed-3.png":"2b09","./seed-4.png":"cb8c","./seed-5.png":"558f"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="0978"},"1a38":function(t,e,a){t.exports=a.p+"static/img/seed-1.e8d2f588.png"},"270c":function(t,e,a){},"2b09":function(t,e,a){t.exports=a.p+"static/img/seed-3.182912ba.png"},"3a4a":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));var s=a("b775");function i(t){return Object(s["a"])({url:"/land/queryByFarmId",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/land/add",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/land/revise",method:"put",data:t})}},"47c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r}));var s=a("b775");function i(t){return Object(s["a"])({url:"/live/add",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/live/queryByFarmId",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/live/revise",method:"post",data:t})}},"541a":function(t,e,a){"use strict";a("82a0")},"558f":function(t,e,a){t.exports=a.p+"static/img/seed-5.53bba765.png"},"749d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage"},[a("div",{staticClass:"genera-situation-wrapper"},[a("div",{staticClass:"img-wrapper"},[a("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.dataObj.imageUrls,(function(t,e){return a("van-swipe-item",{key:e},[a("img",{attrs:{src:t}})])})),1)],1),a("div",{staticClass:"title-wrapper"},[a("div",{staticClass:"title"},[t._v(t._s(t.dataObj.farmName))]),a("div",{staticClass:"other-wrapper"},[a("div",{staticClass:"cost"},[a("svg-icon",{staticStyle:{"font-size":"0.28rem"},attrs:{iconClass:"time-green"}})],1),a("div",{staticClass:"lease"},[t._v(t._s(t.dataObj.rentPeriod)+" days lease")])])]),a("div",{staticClass:"location-wrapper"},[a("svg-icon",{staticStyle:{"font-size":"0.28rem"},attrs:{iconClass:"location-mark-yellow"}}),t._v(" "+t._s(t.dataObj.location)+" ")],1),a("div",{staticClass:"introduction-wrapper"},[t._m(0),a("div",{staticClass:"detail"},[a("span",{domProps:{innerHTML:t._s(t.introduction)}}),t.moreShow?a("span",{staticClass:"more",on:{click:t.clickMore}},[t._v("MORE...")]):t._e(),t.moreShow?t._e():a("span",{domProps:{innerHTML:t._s(t.introductionExtra)}})])]),a("div",{staticClass:"select-land-wrapper"},[a("div",{staticClass:"land-title-warpper"},[a("span",{staticClass:"title"},[t._v("Select The Land")]),a("span",{staticClass:"remain"},[t._v("Remaining "+t._s(t.isRentNum)+"/"+t._s(t.isRentNum+t.isNotRentNum))])]),a("div",{staticClass:"tag-list-wrapper"},t._l(t.tagList,(function(e){return a("div",{key:e.value,staticClass:"tag-list-item"},[a("div",{staticClass:"block",class:["Selected"==e.value?"selected":"Leased"==e.value?"leased":""]}),a("div",{staticClass:"block-txt"},[t._v(t._s(e.value))])])})),0),a("div",{staticClass:"land-list-wrapper"},t._l(t.landList,(function(e){return a("div",{key:e.landId,staticClass:"land-list-item",on:{click:function(a){return t.selectLand(e)}}},[a("div",{staticClass:"ractangle",class:[e.isRent?"leased":"",t.selLandId===e.landId?"selected":""]},[t._v(t._s(e.landId))]),a("div",{staticClass:"ractangle-txt",class:[e.isRent?"leased":"",t.selLandId===e.landId?"selected":""]},[t._v(t._s(e.area)+"m²")])])})),0)]),a("div",{staticClass:"seed-list-wrapper"},[a("div",{staticClass:"title"},[t._v("Seed List")]),a("div",{staticClass:"seed-list"},t._l(t.seedList,(function(e){return a("div",{key:e.seedId,staticClass:"seed-list-item"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.seedImageUrl,alt:""}})]),a("div",{staticClass:"other"},[a("div",{staticClass:"name"},[t._v(t._s(e.seedName))]),a("div",{staticClass:"output-txt"},[t._v("Estimated output:")]),a("div",{staticClass:"output"},[t._v(t._s(e.production)+"kg/m²")])])])})),0)]),a("div",{staticClass:"btn-list-wrapper"},[a("div",{staticClass:"title-wrapper"},[a("div",{staticClass:"title"},[t._v("Detail")]),a("div",{staticClass:"btn",on:{click:function(e){return t.showVR()}}},[t._v(" VR Photo "),a("van-icon",{staticStyle:{top:"0.05rem",left:"0.05rem"},attrs:{name:"arrow",color:"#00B459"}})],1)]),a("div",{staticClass:"title-wrapper"},[a("div",{staticClass:"title"},[t._v("Community")]),a("div",{staticClass:"btn",on:{click:function(e){return t.onCommunity()}}},[t._v(" More "),a("van-icon",{staticStyle:{top:"0.05rem",left:"0.05rem"},attrs:{name:"arrow",color:"#00B459"}})],1)]),a("div",{staticClass:"title-wrapper"},[a("div",{staticClass:"title"},[t._v("Produce")]),a("div",{staticClass:"btn",on:{click:function(e){return t.onFarmGoods()}}},[t._v(" More "),a("van-icon",{staticStyle:{top:"0.05rem",left:"0.05rem"},attrs:{name:"arrow",color:"#00B459"}})],1)])]),a("LiveList",{attrs:{location:t.dataObj.location}}),a("div",{staticClass:"button-list-wrapper"},[a("van-button",{staticClass:"button-list-item",attrs:{round:"",type:"primary",color:"#F7B500"},on:{click:t.onSubscribe}},[t._v("Subscribe")]),a("van-button",{staticClass:"button-list-item",attrs:{round:"",type:"primary"},on:{click:t.onLease}},[t._v("Lease")])],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[t._v(" Introduction "),a("div",{staticClass:"btn-list"})])}],n=a("d415"),r=a("3a4a"),o=a("7998"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"live-list"},[s("div",{staticClass:"title"},[t._v("Live")]),s("div",{staticClass:"list"},[t._l(t.liveList,(function(e,i){return s("div",{key:i,staticClass:"list-item"},["1"==e.status?s("div",{on:{click:function(a){return t.watchLive(e)}}},[s("img",{staticClass:"profile img",attrs:{src:a("fdfc"),alt:""}}),s("img",{staticClass:"avatar img",attrs:{src:t.imgurl(e.iconUrl),alt:""}})]):t._e()])})),t._l(6,(function(t){return s("div",{key:t+"a",staticClass:"list-item"})}))],2)])},d=[],l=a("47c5"),u={name:"LiveList",data(){return{liveList:[]}},mounted(){this.getLive()},props:{location:{default:"Beijing",type:String}},methods:{imgurl(t,e){return"http://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8081/file/download?url="+t},watchLive(t){window.UMJSBridge.callHandler("liveAPI",{index:"1",url:"rtmp://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8090/zbs/"+t.liveId,username:t.username,imgurl:"http://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8081/file/download?url="+t.iconUrl,location:this.location},(function(t){}))},getLive(){Object(l["b"])({farmId:this.$route.params.id}).then(t=>{this.liveList=t.data}).catch(t=>{console.log("error",t)})}}},m=u,p=(a("a098"),a("2877")),h=Object(p["a"])(m,c,d,!1,null,"0b45d886",null),f=h.exports,v={name:"HomePage",components:{LiveList:f},data(){return{liveId:-1,dataObj:{},seedList:[],introduction:"",introductionExtra:"",moreShow:"",landList:[],isRentNum:0,isNotRentNum:0,tagList:[{value:"Optional",name:"Optional"},{value:"Selected",name:"Selected"},{value:"Leased",name:"Leased"}],selLandId:""}},computed:{},mounted(){this.getData()},methods:{showVR(){window.UMJSBridge.callHandler("jumpVR",{url:"http://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8081/file/download?url="+this.dataObj.vrUrl},t=>{})},getData(){let t={id:this.$route.params.id};Object(n["d"])(t).then(t=>{let e=t.data;if(e.introduction&&(e.introduction=e.introduction.replace(/\n/g,"<br/>")),this.commentsList=e,this.dataObj=e,this.dataObj.imageUrls&&this.dataObj.imageUrls.length)for(let a=0;a<this.dataObj.imageUrls.length;a++)this.dataObj.imageUrls[a]="http://ec2-52-80-243-127.cn-north-1.compute.amazonaws.com.cn:8081/file/download?url="+this.dataObj.imageUrls[a];this.getIntroduction()}),Object(n["i"])().then(t=>{this.seedList=t.data;for(let e=0;e<this.seedList.length;e++){let t=this.seedList[e].seedId%5==0?5:this.seedList[e].seedId%5;this.$set(this.seedList[e],"seedImageUrl",a("0978")("./seed-"+t+".png"))}}),Object(r["c"])(t).then(t=>{this.landList=t.data,this.isRentNum=0,this.isNotRentNum=0;for(let e=0;e<this.landList.length;e++)this.landList[e].isRent?this.isRentNum++:this.isNotRentNum++})},goDetail(){this.$router.push({path:"/farm/detail"})},getIntroduction(){this.dataObj.introduction&&(this.dataObj.introduction.length<=200?(this.introduction=this.dataObj.introduction,this.introductionExtra="",this.moreShow=!1):(this.introduction=this.dataObj.introduction.substr(0,200),this.introductionExtra=this.dataObj.introduction.slice(200),this.moreShow=!0))},clickMore(){this.moreShow=!1},async onCommunity(){try{let t=this.$route.params.id;const e=await Object(o["a"])({id:t});e&&e.data&&"[]"!=JSON.stringify(e.data)?(this.$store.dispatch("title/setTitle",e.data.communityName),this.$router.push({path:"/me/community/postinfo",query:{id:JSON.stringify(e.data)}})):this.$toast({message:"no data",position:"bottom"})}catch(t){console.log(t)}},onFarmGoods(){this.$route.params.id;this.$router.push({path:"/mall/goods/result",query:{farmId:this.$route.params.id}})},onSubscribe(){let t=this.$route.params.id,e=this.selLandId;e?this.$router.push({path:"/farm/subscribe/result",query:{farmId:t,land:this.land,type:"subscribe"}}):this.$toast({message:"cannot subscribe, please select the land!"})},onLease(){let t=this.$route.params.id,e=this.selLandId;e?this.$router.push({path:"/farm/order/edit",query:{farmId:t,land:this.land,type:"order"}}):this.$toast({message:"cannot lease, please select the land!"})},selectLand(t){t.isRent||(this.land=JSON.stringify(t),this.selLandId=t.landId)}}},b=v,g=(a("541a"),a("f3c7"),Object(p["a"])(b,s,i,!1,null,"a3b3e836",null));e["default"]=g.exports},7998:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));var s=a("b775");function i(t){return Object(s["a"])({url:"/community/queryByFarmId",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/community/queryByUserName",method:"get",params:t})}},"82a0":function(t,e,a){},a098:function(t,e,a){"use strict";a("06cd")},b75c:function(t,e,a){t.exports=a.p+"static/img/seed-2.970384bf.png"},cb8c:function(t,e,a){t.exports=a.p+"static/img/seed-4.4da74a22.png"},d415:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"f",(function(){return d})),a.d(e,"h",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"k",(function(){return m})),a.d(e,"i",(function(){return p})),a.d(e,"j",(function(){return h}));var s=a("b775");function i(t){return Object(s["a"])({url:"/farm/add",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/farm/query",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/farm/queryAll",method:"get",params:t})}function o(t){return Object(s["a"])({url:"/farm/queryByLocation",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/farm/queryById",method:"get",params:t})}function d(t){return Object(s["a"])({url:"/farm/queryByProductName",method:"get",params:t})}function l(t){return Object(s["a"])({url:"/farm/queryByUserName",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/farm/queryByTotalArea",method:"get",params:t})}function m(t){return Object(s["a"])({url:"/farm/revise",method:"put",data:t})}function p(t){return Object(s["a"])({url:"/seed/query",method:"get",params:t})}function h(t){return Object(s["a"])({url:"/seed/queryById",method:"get",params:t})}},f3c7:function(t,e,a){"use strict";a("270c")},fdfc:function(t,e,a){t.exports=a.p+"static/img/live profile.372b0361.png"}}]);